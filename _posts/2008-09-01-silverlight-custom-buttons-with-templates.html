---
layout: post
title: 'Silverlight: Custom Buttons with Templates'
---

<p>Sometimes you want to define a consistent look for all you application and maybe you completely replace the template of a control (lets say...a button :D), then you want to use the same template with small variations (colors or images for example).</p>  <p>Lets say we have realized the usual round button with a gradient background and that you want to use different colors which have different meanings for the interface, the same principles apply to any other control or custom controls.</p>  <p>Actually you can do it all just defining styles in the App.xaml file, like this:</p>  <div class="wlWriterSmartContent" id="scid:57F11A72-B0E5-49c7-9094-E3A15BD5B5E6:20b8afb3-4569-45db-a58b-dbd146ab807e" style="padding-right: 0px; display: inline; padding-left: 0px; float: none; padding-bottom: 0px; margin: 0px; padding-top: 0px"><pre style="background-color:#F4F4F4;;overflow: auto;"><div><!--

Code highlighting produced by Actipro CodeHighlighter (freeware)
http://www.CodeHighlighter.com/

--><span style="color: #000000;">        </span><span style="color: #000000;">&lt;</span><span style="color: #000000;">RadialGradientBrush x:Name</span><span style="color: #000000;">=</span><span style="color: #800000;">&quot;</span><span style="color: #800000;">RedRadialBrush</span><span style="color: #800000;">&quot;</span><span style="color: #000000;"> GradientOrigin</span><span style="color: #000000;">=</span><span style="color: #800000;">&quot;</span><span style="color: #800000;">0.2,0.2</span><span style="color: #800000;">&quot;</span><span style="color: #000000;"> </span><span style="color: #000000;">&gt;</span><span style="color: #000000;">
            </span><span style="color: #000000;">&lt;</span><span style="color: #000000;">GradientStop Color</span><span style="color: #000000;">=</span><span style="color: #800000;">&quot;</span><span style="color: #800000;">#FFFFFFFF</span><span style="color: #800000;">&quot;</span><span style="color: #000000;">/&gt;</span><span style="color: #000000;">
            </span><span style="color: #000000;">&lt;</span><span style="color: #000000;">GradientStop Color</span><span style="color: #000000;">=</span><span style="color: #800000;">&quot;</span><span style="color: #800000;">Red</span><span style="color: #800000;">&quot;</span><span style="color: #000000;">  Offset</span><span style="color: #000000;">=</span><span style="color: #800000;">&quot;</span><span style="color: #800000;">1</span><span style="color: #800000;">&quot;</span><span style="color: #000000;">/&gt;</span><span style="color: #000000;">
        </span><span style="color: #000000;">&lt;/</span><span style="color: #000000;">RadialGradientBrush</span><span style="color: #000000;">&gt;</span><span style="color: #000000;">

        </span><span style="color: #000000;">&lt;</span><span style="color: #000000;">Style x:Key</span><span style="color: #000000;">=</span><span style="color: #800000;">&quot;</span><span style="color: #800000;">RoundTextButton</span><span style="color: #800000;">&quot;</span><span style="color: #000000;"> TargetType</span><span style="color: #000000;">=</span><span style="color: #800000;">&quot;</span><span style="color: #800000;">Button</span><span style="color: #800000;">&quot;</span><span style="color: #000000;">&gt;</span><span style="color: #000000;">
            </span><span style="color: #000000;">&lt;</span><span style="color: #000000;">Setter Property</span><span style="color: #000000;">=</span><span style="color: #800000;">&quot;</span><span style="color: #800000;">Background</span><span style="color: #800000;">&quot;</span><span style="color: #000000;"> Value</span><span style="color: #000000;">=</span><span style="color: #800000;">&quot;</span><span style="color: #800000;">{StaticResource GrayRadialBrush}</span><span style="color: #800000;">&quot;</span><span style="color: #000000;"> </span><span style="color: #000000;">/&gt;</span><span style="color: #000000;">
            </span><span style="color: #000000;">&lt;</span><span style="color: #000000;">Setter Property</span><span style="color: #000000;">=</span><span style="color: #800000;">&quot;</span><span style="color: #800000;">Width</span><span style="color: #800000;">&quot;</span><span style="color: #000000;"> Value</span><span style="color: #000000;">=</span><span style="color: #800000;">&quot;</span><span style="color: #800000;">30</span><span style="color: #800000;">&quot;</span><span style="color: #000000;"> </span><span style="color: #000000;">/&gt;</span><span style="color: #000000;">
            </span><span style="color: #000000;">&lt;</span><span style="color: #000000;">Setter Property</span><span style="color: #000000;">=</span><span style="color: #800000;">&quot;</span><span style="color: #800000;">Height</span><span style="color: #800000;">&quot;</span><span style="color: #000000;"> Value</span><span style="color: #000000;">=</span><span style="color: #800000;">&quot;</span><span style="color: #800000;">30</span><span style="color: #800000;">&quot;</span><span style="color: #000000;"> </span><span style="color: #000000;">/&gt;</span><span style="color: #000000;">
            </span><span style="color: #000000;">&lt;</span><span style="color: #000000;">Setter Property</span><span style="color: #000000;">=</span><span style="color: #800000;">&quot;</span><span style="color: #800000;">FontSize</span><span style="color: #800000;">&quot;</span><span style="color: #000000;"> Value</span><span style="color: #000000;">=</span><span style="color: #800000;">&quot;</span><span style="color: #800000;">10</span><span style="color: #800000;">&quot;</span><span style="color: #000000;"> </span><span style="color: #000000;">/&gt;</span><span style="color: #000000;">

            </span><span style="color: #000000;">&lt;</span><span style="color: #000000;">Setter Property</span><span style="color: #000000;">=</span><span style="color: #800000;">&quot;</span><span style="color: #800000;">Template</span><span style="color: #800000;">&quot;</span><span style="color: #000000;">&gt;</span><span style="color: #000000;">
                </span><span style="color: #000000;">&lt;</span><span style="color: #000000;">Setter.Value</span><span style="color: #000000;">&gt;</span><span style="color: #000000;">
                    </span><span style="color: #000000;">&lt;</span><span style="color: #000000;">ControlTemplate TargetType</span><span style="color: #000000;">=</span><span style="color: #800000;">&quot;</span><span style="color: #800000;">Button</span><span style="color: #800000;">&quot;</span><span style="color: #000000;">&gt;</span><span style="color: #000000;">
                        </span><span style="color: #000000;">&lt;</span><span style="color: #000000;">Grid Width</span><span style="color: #000000;">=</span><span style="color: #800000;">&quot;</span><span style="color: #800000;">{TemplateBinding Width}</span><span style="color: #800000;">&quot;</span><span style="color: #000000;"> Height</span><span style="color: #000000;">=</span><span style="color: #800000;">&quot;</span><span style="color: #800000;">{TemplateBinding Height}</span><span style="color: #800000;">&quot;</span><span style="color: #000000;">&gt;</span><span style="color: #000000;">
                            </span><span style="color: #000000;">&lt;</span><span style="color: #000000;">vsm:VisualStateManager.VisualStateGroups</span><span style="color: #000000;">&gt;</span><span style="color: #000000;">
                                </span><span style="color: #000000;">&lt;</span><span style="color: #000000;">vsm:VisualStateGroup x:Name</span><span style="color: #000000;">=</span><span style="color: #800000;">&quot;</span><span style="color: #800000;">FocusStates</span><span style="color: #800000;">&quot;</span><span style="color: #000000;">&gt;</span><span style="color: #000000;">
                                    </span><span style="color: #000000;">&lt;</span><span style="color: #000000;">vsm:VisualState x:Name</span><span style="color: #000000;">=</span><span style="color: #800000;">&quot;</span><span style="color: #800000;">Unfocused</span><span style="color: #800000;">&quot;</span><span style="color: #000000;">/&gt;</span><span style="color: #000000;">
                                    ...
        </span><span style="color: #000000;">&lt;/</span><span style="color: #000000;">Style</span><span style="color: #000000;">&gt;</span><span style="color: #000000;">
</span></div></pre><!-- Code inserted with Steve Dunn's Windows Live Writer Code Formatter Plugin.  http://dunnhq.com --></div>

<p>and you can instantiate some on a page like this:</p>

<div class="wlWriterSmartContent" id="scid:57F11A72-B0E5-49c7-9094-E3A15BD5B5E6:f57f0029-f93d-4248-9b73-0499ef947f41" style="padding-right: 0px; display: inline; padding-left: 0px; float: none; padding-bottom: 0px; margin: 0px; padding-top: 0px"><pre style="background-color:#F4F4F4;;overflow: auto;"><div><!--

Code highlighting produced by Actipro CodeHighlighter (freeware)
http://www.CodeHighlighter.com/

--><span style="color: #000000;">&lt;</span><span style="color: #000000;">Grid x:Name</span><span style="color: #000000;">=</span><span style="color: #800000;">&quot;</span><span style="color: #800000;">LayoutRoot</span><span style="color: #800000;">&quot;</span><span style="color: #000000;"> Background</span><span style="color: #000000;">=</span><span style="color: #800000;">&quot;</span><span style="color: #800000;">White</span><span style="color: #800000;">&quot;</span><span style="color: #000000;">&gt;</span><span style="color: #000000;">
        </span><span style="color: #000000;">&lt;</span><span style="color: #000000;">StackPanel</span><span style="color: #000000;">&gt;</span><span style="color: #000000;">
            </span><span style="color: #000000;">&lt;</span><span style="color: #000000;">StackPanel Orientation</span><span style="color: #000000;">=</span><span style="color: #800000;">&quot;</span><span style="color: #800000;">Horizontal</span><span style="color: #800000;">&quot;</span><span style="color: #000000;">&gt;</span><span style="color: #000000;">
                </span><span style="color: #000000;">&lt;</span><span style="color: #000000;">Button Content</span><span style="color: #000000;">=</span><span style="color: #800000;">&quot;</span><span style="color: #800000;">Edit1</span><span style="color: #800000;">&quot;</span><span style="color: #000000;"> Style</span><span style="color: #000000;">=</span><span style="color: #800000;">&quot;</span><span style="color: #800000;">{StaticResource RoundTextButton}</span><span style="color: #800000;">&quot;</span><span style="color: #000000;"> </span><span style="color: #000000;">/&gt;</span><span style="color: #000000;">
                </span><span style="color: #000000;">&lt;</span><span style="color: #000000;">Button Content</span><span style="color: #000000;">=</span><span style="color: #800000;">&quot;</span><span style="color: #800000;">Edit2</span><span style="color: #800000;">&quot;</span><span style="color: #000000;"> Style</span><span style="color: #000000;">=</span><span style="color: #800000;">&quot;</span><span style="color: #800000;">{StaticResource RoundTextButton}</span><span style="color: #800000;">&quot;</span><span style="color: #000000;"> Background</span><span style="color: #000000;">=</span><span style="color: #800000;">&quot;</span><span style="color: #800000;">{StaticResource YellowRadialBrush}</span><span style="color: #800000;">&quot;</span><span style="color: #000000;"> </span><span style="color: #000000;">/&gt;</span><span style="color: #000000;">
                </span><span style="color: #000000;">&lt;</span><span style="color: #000000;">Button Content</span><span style="color: #000000;">=</span><span style="color: #800000;">&quot;</span><span style="color: #800000;">Edit3</span><span style="color: #800000;">&quot;</span><span style="color: #000000;"> Style</span><span style="color: #000000;">=</span><span style="color: #800000;">&quot;</span><span style="color: #800000;">{StaticResource RoundTextButton}</span><span style="color: #800000;">&quot;</span><span style="color: #000000;"> Background</span><span style="color: #000000;">=</span><span style="color: #800000;">&quot;</span><span style="color: #800000;">{StaticResource GreenRadialBrush}</span><span style="color: #800000;">&quot;</span><span style="color: #000000;"> </span><span style="color: #000000;">/&gt;</span><span style="color: #000000;">
                </span><span style="color: #000000;">&lt;</span><span style="color: #000000;">Button Content</span><span style="color: #000000;">=</span><span style="color: #800000;">&quot;</span><span style="color: #800000;">Edit4</span><span style="color: #800000;">&quot;</span><span style="color: #000000;"> Style</span><span style="color: #000000;">=</span><span style="color: #800000;">&quot;</span><span style="color: #800000;">{StaticResource RoundTextButton}</span><span style="color: #800000;">&quot;</span><span style="color: #000000;"> Background</span><span style="color: #000000;">=</span><span style="color: #800000;">&quot;</span><span style="color: #800000;">{StaticResource RedRadialBrush}</span><span style="color: #800000;">&quot;</span><span style="color: #000000;"> </span><span style="color: #000000;">/&gt;</span><span style="color: #000000;">
            </span><span style="color: #000000;">&lt;/</span><span style="color: #000000;">StackPanel</span><span style="color: #000000;">&gt;</span><span style="color: #000000;">
            ...
        </span><span style="color: #000000;">&lt;/</span><span style="color: #000000;">StackPanel</span><span style="color: #000000;">&gt;</span><span style="color: #000000;">
    </span><span style="color: #000000;">&lt;/</span><span style="color: #000000;">Grid</span><span style="color: #000000;">&gt;</span></div></pre><!-- Code inserted with Steve Dunn's Windows Live Writer Code Formatter Plugin.  http://dunnhq.com --></div>

<p>&#160;</p>

<p>The code above produce this:</p>

<p><a href="/UserFiles/Guardian/2008/09/custombuttons1.jpg"><img style="border-right: 0px; border-top: 0px; border-left: 0px; border-bottom: 0px" height="184" alt="CustomButtons1" src="/UserFiles/Guardian/2008/09/custombuttons1-thumb.jpg" width="205" border="0" /></a> </p>

<p>4 small round buttons with animations when your mause move over them or when you press them.</p>

<p>What we see here is that the xaml code of the page looks a little bloated and not very well readable, plus changing a single resource as the background color of the buttons in code is a little messy cause you have to create a new brush consistent with the previous ones.</p>

<p>What we can do is define our own Button control (which inherits from Button), define the properties we want to access directly (as dependancy properties to support binding and templating) and then move the master template in the Generic.xaml file. The button class is straightforward and doesn't need many comments:</p>

<p>
  <div class="wlWriterSmartContent" id="scid:57F11A72-B0E5-49c7-9094-E3A15BD5B5E6:52d2892a-71b2-4131-8405-971d59ff5516" style="padding-right: 0px; display: inline; padding-left: 0px; float: none; padding-bottom: 0px; margin: 0px; padding-top: 0px"><pre style="background-color:#F4F4F4;;overflow: auto;"><div><!--

Code highlighting produced by Actipro CodeHighlighter (freeware)
http://www.CodeHighlighter.com/

--><span style="color: #0000FF;">public</span><span style="color: #000000;"> </span><span style="color: #0000FF;">class</span><span style="color: #000000;"> CustomButton : Button, INotifyPropertyChanged
    {
        </span><span style="color: #0000FF;">public</span><span style="color: #000000;"> CustomButton() : </span><span style="color: #0000FF;">base</span><span style="color: #000000;">()
        {
            </span><span style="color: #0000FF;">this</span><span style="color: #000000;">.DefaultStyleKey </span><span style="color: #000000;">=</span><span style="color: #000000;"> </span><span style="color: #0000FF;">typeof</span><span style="color: #000000;">(CustomButton);
        }

        </span><span style="color: #0000FF;">public</span><span style="color: #000000;"> </span><span style="color: #0000FF;">override</span><span style="color: #000000;"> </span><span style="color: #0000FF;">void</span><span style="color: #000000;"> OnApplyTemplate()
        {
            </span><span style="color: #0000FF;">base</span><span style="color: #000000;">.OnApplyTemplate();

            GradientStop gs </span><span style="color: #000000;">=</span><span style="color: #000000;"> GetTemplateChild(</span><span style="color: #800000;">&quot;</span><span style="color: #800000;">EllipseBackGroundColor</span><span style="color: #800000;">&quot;</span><span style="color: #000000;">) </span><span style="color: #0000FF;">as</span><span style="color: #000000;"> GradientStop;
            </span><span style="color: #0000FF;">if</span><span style="color: #000000;"> (gs </span><span style="color: #000000;">!=</span><span style="color: #000000;"> </span><span style="color: #0000FF;">null</span><span style="color: #000000;">)
                gs.Color </span><span style="color: #000000;">=</span><span style="color: #000000;"> BackgroundColor;
        }

        </span><span style="color: #0000FF;">#region</span><span style="color: #000000;"> BackgroundColor</span><span style="color: #000000;">

        </span><span style="color: #808080;">///</span><span style="color: #008000;"> </span><span style="color: #808080;">&lt;summary&gt;</span><span style="color: #008000;"> 
        </span><span style="color: #808080;">///</span><span style="color: #008000;"> Gets or sets the BackgroundColor possible Value of the Color object.
        </span><span style="color: #808080;">///</span><span style="color: #008000;"> </span><span style="color: #808080;">&lt;/summary&gt;</span><span style="color: #008000;"> </span><span style="color: #808080;">
</span><span style="color: #000000;">        </span><span style="color: #0000FF;">public</span><span style="color: #000000;"> Color BackgroundColor
        {
            </span><span style="color: #0000FF;">get</span><span style="color: #000000;"> { </span><span style="color: #0000FF;">return</span><span style="color: #000000;"> (Color)GetValue(BackgroundColorProperty); }
            </span><span style="color: #0000FF;">set</span><span style="color: #000000;"> { SetValue(BackgroundColorProperty, value); }
        }

        </span><span style="color: #808080;">///</span><span style="color: #008000;"> </span><span style="color: #808080;">&lt;summary&gt;</span><span style="color: #008000;"> 
        </span><span style="color: #808080;">///</span><span style="color: #008000;"> Identifies the BackgroundColor dependency property.
        </span><span style="color: #808080;">///</span><span style="color: #008000;"> </span><span style="color: #808080;">&lt;/summary&gt;</span><span style="color: #008000;"> </span><span style="color: #808080;">
</span><span style="color: #000000;">        </span><span style="color: #0000FF;">public</span><span style="color: #000000;"> </span><span style="color: #0000FF;">static</span><span style="color: #000000;"> </span><span style="color: #0000FF;">readonly</span><span style="color: #000000;"> DependencyProperty BackgroundColorProperty </span><span style="color: #000000;">=</span><span style="color: #000000;">
                        DependencyProperty.Register(
                                </span><span style="color: #800000;">&quot;</span><span style="color: #800000;">BackgroundColor</span><span style="color: #800000;">&quot;</span><span style="color: #000000;">,
                                </span><span style="color: #0000FF;">typeof</span><span style="color: #000000;">(Color),
                                </span><span style="color: #0000FF;">typeof</span><span style="color: #000000;">(CustomButton),
                                </span><span style="color: #0000FF;">new</span><span style="color: #000000;"> PropertyMetadata(OnBackgroundColorPropertyChanged));

        </span><span style="color: #808080;">///</span><span style="color: #008000;"> </span><span style="color: #808080;">&lt;summary&gt;</span><span style="color: #008000;">
        </span><span style="color: #808080;">///</span><span style="color: #008000;"> BackgroundColorProperty property changed handler. 
        </span><span style="color: #808080;">///</span><span style="color: #008000;"> </span><span style="color: #808080;">&lt;/summary&gt;</span><span style="color: #008000;">
        </span><span style="color: #808080;">///</span><span style="color: #008000;"> </span><span style="color: #808080;">&lt;param name=&quot;d&quot;&gt;</span><span style="color: #008000;">CustomButton that changed its BackgroundColor.</span><span style="color: #808080;">&lt;/param&gt;</span><span style="color: #008000;">
        </span><span style="color: #808080;">///</span><span style="color: #008000;"> </span><span style="color: #808080;">&lt;param name=&quot;e&quot;&gt;</span><span style="color: #008000;">DependencyPropertyChangedEventArgs.</span><span style="color: #808080;">&lt;/param&gt;</span><span style="color: #008000;"> </span><span style="color: #808080;">
</span><span style="color: #000000;">        </span><span style="color: #0000FF;">private</span><span style="color: #000000;"> </span><span style="color: #0000FF;">static</span><span style="color: #000000;"> </span><span style="color: #0000FF;">void</span><span style="color: #000000;"> OnBackgroundColorPropertyChanged(DependencyObject d, DependencyPropertyChangedEventArgs e)
        {
            CustomButton _CustomButton </span><span style="color: #000000;">=</span><span style="color: #000000;"> d </span><span style="color: #0000FF;">as</span><span style="color: #000000;"> CustomButton;
            </span><span style="color: #0000FF;">if</span><span style="color: #000000;"> (_CustomButton </span><span style="color: #000000;">!=</span><span style="color: #000000;"> </span><span style="color: #0000FF;">null</span><span style="color: #000000;">)
            {
                OnPropertyChanged(_CustomButton, </span><span style="color: #800000;">&quot;</span><span style="color: #800000;">BackgroundColor</span><span style="color: #800000;">&quot;</span><span style="color: #000000;">);
            }
        }
        </span><span style="color: #0000FF;">#endregion</span><span style="color: #000000;"> BackgroundColor</span><span style="color: #000000;">

        </span><span style="color: #0000FF;">#region</span><span style="color: #000000;"> INotifyPropertyChanged Members</span><span style="color: #000000;">
    }</span></div></pre><!-- Code inserted with Steve Dunn's Windows Live Writer Code Formatter Plugin.  http://dunnhq.com --></div>
</p>

<p>The DefaultStyleKey propery setted in the constructor tells what is the default style to load from the Generic.xaml file.</p>

<p>The interesting thing happens in the OnApplyTemplate() functions; here since we cannot use TemplateBinding to change the color of the GradientStop used in the RadialBrush that defines the background color of the button, we have to access to the element in code and change its value 'at runtime'.</p>

<p>I modified my xaml like this:</p>

<p>
  <div class="wlWriterSmartContent" id="scid:57F11A72-B0E5-49c7-9094-E3A15BD5B5E6:ef4a4feb-0861-4371-8300-5b01c0b8b536" style="padding-right: 0px; display: inline; padding-left: 0px; float: none; padding-bottom: 0px; margin: 0px; padding-top: 0px"><pre style="background-color:#F4F4F4;;overflow: auto;"><div><!--

Code highlighting produced by Actipro CodeHighlighter (freeware)
http://www.CodeHighlighter.com/

--><span style="color: #000000;">&lt;</span><span style="color: #000000;">Grid x:Name</span><span style="color: #000000;">=</span><span style="color: #800000;">&quot;</span><span style="color: #800000;">LayoutRoot</span><span style="color: #800000;">&quot;</span><span style="color: #000000;"> Background</span><span style="color: #000000;">=</span><span style="color: #800000;">&quot;</span><span style="color: #800000;">White</span><span style="color: #800000;">&quot;</span><span style="color: #000000;">&gt;</span><span style="color: #000000;">
        </span><span style="color: #000000;">&lt;</span><span style="color: #000000;">StackPanel</span><span style="color: #000000;">&gt;</span><span style="color: #000000;">
            </span><span style="color: #000000;">&lt;</span><span style="color: #000000;">StackPanel Orientation</span><span style="color: #000000;">=</span><span style="color: #800000;">&quot;</span><span style="color: #800000;">Horizontal</span><span style="color: #800000;">&quot;</span><span style="color: #000000;">&gt;</span><span style="color: #000000;">
                </span><span style="color: #000000;">&lt;</span><span style="color: #000000;">Button Content</span><span style="color: #000000;">=</span><span style="color: #800000;">&quot;</span><span style="color: #800000;">Edit1</span><span style="color: #800000;">&quot;</span><span style="color: #000000;"> Style</span><span style="color: #000000;">=</span><span style="color: #800000;">&quot;</span><span style="color: #800000;">{StaticResource RoundTextButton}</span><span style="color: #800000;">&quot;</span><span style="color: #000000;"> </span><span style="color: #000000;">/&gt;</span><span style="color: #000000;">
                </span><span style="color: #000000;">&lt;</span><span style="color: #000000;">Button Content</span><span style="color: #000000;">=</span><span style="color: #800000;">&quot;</span><span style="color: #800000;">Edit2</span><span style="color: #800000;">&quot;</span><span style="color: #000000;"> Style</span><span style="color: #000000;">=</span><span style="color: #800000;">&quot;</span><span style="color: #800000;">{StaticResource RoundTextButton}</span><span style="color: #800000;">&quot;</span><span style="color: #000000;"> Background</span><span style="color: #000000;">=</span><span style="color: #800000;">&quot;</span><span style="color: #800000;">{StaticResource YellowRadialBrush}</span><span style="color: #800000;">&quot;</span><span style="color: #000000;"> </span><span style="color: #000000;">/&gt;</span><span style="color: #000000;">
                </span><span style="color: #000000;">&lt;</span><span style="color: #000000;">Button Content</span><span style="color: #000000;">=</span><span style="color: #800000;">&quot;</span><span style="color: #800000;">Edit3</span><span style="color: #800000;">&quot;</span><span style="color: #000000;"> Style</span><span style="color: #000000;">=</span><span style="color: #800000;">&quot;</span><span style="color: #800000;">{StaticResource RoundTextButton}</span><span style="color: #800000;">&quot;</span><span style="color: #000000;"> Background</span><span style="color: #000000;">=</span><span style="color: #800000;">&quot;</span><span style="color: #800000;">{StaticResource GreenRadialBrush}</span><span style="color: #800000;">&quot;</span><span style="color: #000000;"> </span><span style="color: #000000;">/&gt;</span><span style="color: #000000;">
                </span><span style="color: #000000;">&lt;</span><span style="color: #000000;">Button Content</span><span style="color: #000000;">=</span><span style="color: #800000;">&quot;</span><span style="color: #800000;">Edit4</span><span style="color: #800000;">&quot;</span><span style="color: #000000;"> Style</span><span style="color: #000000;">=</span><span style="color: #800000;">&quot;</span><span style="color: #800000;">{StaticResource RoundTextButton}</span><span style="color: #800000;">&quot;</span><span style="color: #000000;"> Background</span><span style="color: #000000;">=</span><span style="color: #800000;">&quot;</span><span style="color: #800000;">{StaticResource RedRadialBrush}</span><span style="color: #800000;">&quot;</span><span style="color: #000000;"> </span><span style="color: #000000;">/&gt;</span><span style="color: #000000;">
            </span><span style="color: #000000;">&lt;/</span><span style="color: #000000;">StackPanel</span><span style="color: #000000;">&gt;</span><span style="color: #000000;">
            </span><span style="color: #000000;">&lt;</span><span style="color: #000000;">StackPanel Orientation</span><span style="color: #000000;">=</span><span style="color: #800000;">&quot;</span><span style="color: #800000;">Horizontal</span><span style="color: #800000;">&quot;</span><span style="color: #000000;">&gt;</span><span style="color: #000000;">
                </span><span style="color: #000000;">&lt;</span><span style="color: #000000;">ctrl:CustomButton Content</span><span style="color: #000000;">=</span><span style="color: #800000;">&quot;</span><span style="color: #800000;">Edit1</span><span style="color: #800000;">&quot;</span><span style="color: #000000;"> </span><span style="color: #000000;">/&gt;</span><span style="color: #000000;">
                </span><span style="color: #000000;">&lt;</span><span style="color: #000000;">ctrl:CustomButton Content</span><span style="color: #000000;">=</span><span style="color: #800000;">&quot;</span><span style="color: #800000;">Edit1</span><span style="color: #800000;">&quot;</span><span style="color: #000000;"> BackgroundColor</span><span style="color: #000000;">=</span><span style="color: #800000;">&quot;</span><span style="color: #800000;">Yellow</span><span style="color: #800000;">&quot;</span><span style="color: #000000;"> </span><span style="color: #000000;">/&gt;</span><span style="color: #000000;">
                </span><span style="color: #000000;">&lt;</span><span style="color: #000000;">ctrl:CustomButton Content</span><span style="color: #000000;">=</span><span style="color: #800000;">&quot;</span><span style="color: #800000;">Edit1</span><span style="color: #800000;">&quot;</span><span style="color: #000000;"> BackgroundColor</span><span style="color: #000000;">=</span><span style="color: #800000;">&quot;</span><span style="color: #800000;">Green</span><span style="color: #800000;">&quot;</span><span style="color: #000000;"> </span><span style="color: #000000;">/&gt;</span><span style="color: #000000;">
                </span><span style="color: #000000;">&lt;</span><span style="color: #000000;">ctrl:CustomButton Content</span><span style="color: #000000;">=</span><span style="color: #800000;">&quot;</span><span style="color: #800000;">Edit1</span><span style="color: #800000;">&quot;</span><span style="color: #000000;"> BackgroundColor</span><span style="color: #000000;">=</span><span style="color: #800000;">&quot;</span><span style="color: #800000;">Red</span><span style="color: #800000;">&quot;</span><span style="color: #000000;"> </span><span style="color: #000000;">/&gt;</span><span style="color: #000000;">
            </span><span style="color: #000000;">&lt;/</span><span style="color: #000000;">StackPanel</span><span style="color: #000000;">&gt;</span><span style="color: #000000;">
        </span><span style="color: #000000;">&lt;/</span><span style="color: #000000;">StackPanel</span><span style="color: #000000;">&gt;</span><span style="color: #000000;">
    </span><span style="color: #000000;">&lt;/</span><span style="color: #000000;">Grid</span><span style="color: #000000;">&gt;</span></div></pre><!-- Code inserted with Steve Dunn's Windows Live Writer Code Formatter Plugin.  http://dunnhq.com --></div>
</p>

<p>But this isnt enough yet since the first time I run the code I saw that the buttons weren't working well:</p>

<p><a href="/UserFiles/Guardian/2008/09/custombuttons2.jpg"><img style="border-right: 0px; border-top: 0px; border-left: 0px; border-bottom: 0px" height="107" alt="CustomButtons2" src="/UserFiles/Guardian/2008/09/custombuttons2-thumb.jpg" width="142" border="0" /></a> </p>

<p>The 4 buttons were rendered circular but their color was not right and the animation didnt worked too...it tooks me a while (and the help of <a href="http://blogs.msdn.com/delay/archive/2008/06/06/continuing-access-to-silverlight-2-s-generic-xaml-resources-silverlightdefaultstylebrowser-updated-for-silverlight-2-beta-2.aspx">SilverlightDefaultStyleBrowser</a>) to realize that by default every control is created in a DISABLED state and that you have to enable it (in the xaml style or in code). </p>

<div class="wlWriterSmartContent" id="scid:57F11A72-B0E5-49c7-9094-E3A15BD5B5E6:376e1e5f-40b7-4822-80f7-a5af80a6fbe4" style="padding-right: 0px; display: inline; padding-left: 0px; float: none; padding-bottom: 0px; margin: 0px; padding-top: 0px"><pre style="background-color:#F4F4F4;;overflow: auto;"><div><!--

Code highlighting produced by Actipro CodeHighlighter (freeware)
http://www.CodeHighlighter.com/

--><span style="color: #000000;">&lt;</span><span style="color: #000000;">Style TargetType</span><span style="color: #000000;">=</span><span style="color: #800000;">&quot;</span><span style="color: #800000;">ctrl:CustomButton</span><span style="color: #800000;">&quot;</span><span style="color: #000000;">&gt;</span><span style="color: #000000;">
        </span><span style="color: #000000;">&lt;!--</span><span style="color: #000000;"> key lines to enable the control </span><span style="color: #000000;">--&gt;</span><span style="color: #000000;">
        </span><span style="color: #000000;">&lt;</span><span style="color: #000000;">Setter Property</span><span style="color: #000000;">=</span><span style="color: #800000;">&quot;</span><span style="color: #800000;">IsEnabled</span><span style="color: #800000;">&quot;</span><span style="color: #000000;"> Value</span><span style="color: #000000;">=</span><span style="color: #800000;">&quot;</span><span style="color: #800000;">true</span><span style="color: #800000;">&quot;</span><span style="color: #000000;"> </span><span style="color: #000000;">/&gt;</span><span style="color: #000000;">
        </span><span style="color: #000000;">&lt;</span><span style="color: #000000;">Setter Property</span><span style="color: #000000;">=</span><span style="color: #800000;">&quot;</span><span style="color: #800000;">IsTabStop</span><span style="color: #800000;">&quot;</span><span style="color: #000000;"> Value</span><span style="color: #000000;">=</span><span style="color: #800000;">&quot;</span><span style="color: #800000;">true</span><span style="color: #800000;">&quot;</span><span style="color: #000000;"> </span><span style="color: #000000;">/&gt;</span><span style="color: #000000;">
...</span></div></pre><!-- Code inserted with Steve Dunn's Windows Live Writer Code Formatter Plugin.  http://dunnhq.com --></div>

<p>After placing the right lines in the default style in Generic.xaml it all finally worked and you can now have your buttons working with a more compact and readable xaml.</p>

<p>Example Solution: </p>

<p>
  <div class="wlWriterSmartContent" id="scid:8eb9d37f-1541-4f29-b6f4-1eea890d4876:dcd97132-3fce-475c-99c0-7561495955eb" style="padding-right: 0px; display: inline; padding-left: 0px; padding-bottom: 0px; margin: 0px; padding-top: 0px"><p><div><a href="/UserFiles/Guardian/2008/09/custombuttons.zip" target="_self">CustomButtons.zip</a></div></p></div>
</p>

<div class="wlWriterSmartContent" id="scid:0767317B-992E-4b12-91E0-4F059A8CECA8:bc60873f-4e07-4f2d-8a41-548495dfdc3c" style="padding-right: 0px; display: inline; padding-left: 0px; padding-bottom: 0px; margin: 0px; padding-top: 0px">Technorati Tag: <a href="http://technorati.com/tags/silverlight" rel="tag">silverlight</a>,<a href="http://technorati.com/tags/custom%20control" rel="tag">custom control</a>,<a href="http://technorati.com/tags/template" rel="tag">template</a></div><h2>Related Content</h2><ul><li style="list-style-type: none"><a href="http://www.primordialcode.com/blog/post/silverlight-simulate-a-windows-desktop-application-part-1">Silverlight: simulate a 'Windows' desktop application - part 1</a> (26/08/2015)</li><li style="list-style-type: none"><a href="http://www.primordialcode.com/blog/post/the-power-of-canvas">Silverlight: The Power of <Canvas></a> (26/08/2015)</li><li style="list-style-type: none"><a href="http://www.primordialcode.com/blog/post/how-to-add-a-context-men-to-a-frameworkelement">Silverlight: How to Add a Context Men√π to a FrameworkElement</a> (26/08/2015)</li><li style="list-style-type: none"><a href="http://www.primordialcode.com/blog/post/silverlight-dropdown-menu-control">Silverlight: Dropdown Menu Control</a> (10/07/2008)</li><li style="list-style-type: none"><a href="http://www.primordialcode.com/blog/post/silverlight-how-to-build-a-simple-menu-control">Silverlight: how to build a simple Menu Control</a> (26/08/2015)</li><li style="list-style-type: none"><a href="/Blog/Related/silverlight-custom-buttons-with-templates"><strong>More related document (46)</strong></a></li></ul><br />
